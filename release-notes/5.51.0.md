# CiviCRM 5.51.0

Released July 6, 2022;

- **[Features](#features)**
- **[Bugs resolved](#bugs)**
- **[Miscellany](#misc)**
- **[Credits](#credits)**

## <a name="features"></a>Features

## <a name="bugs"></a>Bugs resolved

### Core CiviCRM

- **dev/core#3680 - Currency incorrectly displayed for price set when default is not USD ([23867](https://github.com/civicrm/civicrm-core/pull/23867))**

- **dev/core#3675 Fix Permissioned Relationship pseudoconstant ([23865](https://github.com/civicrm/civicrm-core/pull/23865))**

- **dev/core#3665 import summary fixes ([23839](https://github.com/civicrm/civicrm-core/pull/23839))**

- **dev/core#3673 do not attempt to import empty related contact ([23849](https://github.com/civicrm/civicrm-core/pull/23849))**

- **Refs: dev/core#3671 Fix regression involving CiviCRM Webform + Cases. ([23836](https://github.com/civicrm/civicrm-core/pull/23836))**

- **[REF] Update Guzzle to be 6.5.8 ([23858](https://github.com/civicrm/civicrm-core/pull/23858))**

- **fixes core#3661: Don't check API permissions in CRM_Mailing_BAO_Mailing::getGroupNames() ([23822](https://github.com/civicrm/civicrm-core/pull/23822))**

- **[REF] dev/core#3658 Regenerate civicrm_generated to ensure that groupâ€¦ ([23842](https://github.com/civicrm/civicrm-core/pull/23842))**

- **Add view link to user job monitoring page ([23838](https://github.com/civicrm/civicrm-core/pull/23838))**

- **dev/core#3662 increase length of import table status message ([23821](https://github.com/civicrm/civicrm-core/pull/23821))**

- **dev/core#3667 fix failure to match existing contacts in skip mode ([23835](https://github.com/civicrm/civicrm-core/pull/23835))**

- **dev/core#3663 fix output regression on csv output for import ([23823](https://github.com/civicrm/civicrm-core/pull/23823))**

- **Afform - fix dependency injection for autogenerated forms ([23818](https://github.com/civicrm/civicrm-core/pull/23818))**

- **Handle empty date token gracefully ([23827](https://github.com/civicrm/civicrm-core/pull/23827))**

- **(dev/core#3660) Ensure that rebuildMenuAndCaches has current mixins+classloaders ([23824](https://github.com/civicrm/civicrm-core/pull/23824))**

- **SearchKit - Only add filter values to Afform title if passed internally ([23807](https://github.com/civicrm/civicrm-core/pull/23807))**

- **[REF] Fix second output in customFormat function and extend unit test ([23815](https://github.com/civicrm/civicrm-core/pull/23815))**

- **Fix breakage in message preview on workflow contributions ([23801](https://github.com/civicrm/civicrm-core/pull/23801))**

- **dev/financial#197 Revert freezing on total_amount field on recurring form (alt to #23796) ([23805](https://github.com/civicrm/civicrm-core/pull/23805))**

- **Fix Automatic renewal membership from front end contribution forms ([23798](https://github.com/civicrm/civicrm-core/pull/23798))**

- **dev/core#3502 - CiviEventDispatcher - Softer errors for not-ready. More comments. ([23785](https://github.com/civicrm/civicrm-core/pull/23785))**

- **Add integer validation to import ([23753](https://github.com/civicrm/civicrm-core/pull/23753))**

- **Fix target contact label back to include target ([23763](https://github.com/civicrm/civicrm-core/pull/23763))**

- **dev/core#2706 dev/core#2308 fix activity import to update multi-select fields ([23764](https://github.com/civicrm/civicrm-core/pull/23764))**

- **only check batch currency match when adding a financial_trxn ([23788](https://github.com/civicrm/civicrm-core/pull/23788))**

- **dev/financial#199 Fix additional details on edit template contribution ([23786](https://github.com/civicrm/civicrm-core/pull/23786))**

- **FiveFiftyOne - Enable snapshots for data modified data ([23783](https://github.com/civicrm/civicrm-core/pull/23783))**

- **dev/core#3651 dev/core#1337 Fix failure to show last column data in output, spaces in names ([23771](https://github.com/civicrm/civicrm-core/pull/23771))**

- **(dev/core#3653) CRM_Queue_Runner - Fix upgrade warnings. Extract disableBackgroundExecution(). ([23780](https://github.com/civicrm/civicrm-core/pull/23780))**

- **dev/core#3513 Remove 'done' from sumary/import monitoring page ([23766](https://github.com/civicrm/civicrm-core/pull/23766))**

- **fix disableUSPS since import running in separate context of Queue. ([23777](https://github.com/civicrm/civicrm-core/pull/23777))**

- **dev/core#3653 Fix on queue runner not working in upgrade ([23775](https://github.com/civicrm/civicrm-core/pull/23775))**

- **Fix import regression - contribution import borks on do_not_import ([23772](https://github.com/civicrm/civicrm-core/pull/23772))**

- **Deduepe - Fix form buttons (again) ([23757](https://github.com/civicrm/civicrm-core/pull/23757))**

- **[REGRESSION] SearchKit - Fix angular console error when totalCount is not given ([23759](https://github.com/civicrm/civicrm-core/pull/23759))**

- **dev/core#2325 import second-handling fix ([23754](https://github.com/civicrm/civicrm-core/pull/23754))**

- **Catch & convert Guzzle exception ([23765](https://github.com/civicrm/civicrm-core/pull/23765))**

- **Setup - Remove CiviGrant from available components ([23758](https://github.com/civicrm/civicrm-core/pull/23758))**

- **dev/core#3511 Improve handling of invalid saved mapping fields ([23760](https://github.com/civicrm/civicrm-core/pull/23760))**

- **dev/core#3512 fix rc fatal error when state is invalid ([23761](https://github.com/civicrm/civicrm-core/pull/23761))**

- **dev/core#3160 fix inability to import 'just contactid' and add to group ([23756](https://github.com/civicrm/civicrm-core/pull/23756))**

- **dev/core#3505, dev/core#3506 dev/core#3052 Import fixes for unicode url, CÃ´te dâ€™Ivoire ([23755](https://github.com/civicrm/civicrm-core/pull/23755))**

- **Remove some more unused code ([23747](https://github.com/civicrm/civicrm-core/pull/23747))**

- **Reduce test output spam ([23750](https://github.com/civicrm/civicrm-core/pull/23750))**

- **Update guzzle to 6.5.7 ([23748](https://github.com/civicrm/civicrm-core/pull/23748))**

- **Fix for failing test in master ([23751](https://github.com/civicrm/civicrm-core/pull/23751))**

- **CRM_Queue_Runner - Add basic/skeletal support for `runAllInteractively()` ([23746](https://github.com/civicrm/civicrm-core/pull/23746))**

- **Civi::queue() - Add support for 'template' queues ([23679](https://github.com/civicrm/civicrm-core/pull/23679))**

- **Fix unrelease regression - malformed MapField without skipColumnHeaders ([23744](https://github.com/civicrm/civicrm-core/pull/23744))**

- **Remove obsolete/unused code, fix notices - activity import ([23745](https://github.com/civicrm/civicrm-core/pull/23745))**

- **CRM_Queue_Task - Track an optional `$runAs` property ([23743](https://github.com/civicrm/civicrm-core/pull/23743))**

- **Remove more obsolete import code ([23742](https://github.com/civicrm/civicrm-core/pull/23742))**

- **Remove unused functions ([23740](https://github.com/civicrm/civicrm-core/pull/23740))**

- **Add upgrade for label to name conversion in `civicrm_mapping_field` for multiple custom imports ([23737](https://github.com/civicrm/civicrm-core/pull/23737))**

- **Enable QueueRunner for all imports ([23712](https://github.com/civicrm/civicrm-core/pull/23712))**

- **dev/core#3498 Fix mishandled option values ([23736](https://github.com/civicrm/civicrm-core/pull/23736))**

- **Fix test to validate forms & remove some unused code ([23734](https://github.com/civicrm/civicrm-core/pull/23734))**

- **Afform - Trigger 'crmFormSuccess' event after submission ([23735](https://github.com/civicrm/civicrm-core/pull/23735))**

- **Afform - allow ids to be passed directly into the directive ([23656](https://github.com/civicrm/civicrm-core/pull/23656))**

- **SearchKit - Remove confusing extra joins between Contact & Related Contacts ([23655](https://github.com/civicrm/civicrm-core/pull/23655))**

- **Participant import fix - broken uniqueName fields, mapping saving, evâ€¦ ([23733](https://github.com/civicrm/civicrm-core/pull/23733))**

- **Issue #3483: parent_id not always available as index ([23730](https://github.com/civicrm/civicrm-core/pull/23730))**

- **[NFC] Remove weird test data file ([23727](https://github.com/civicrm/civicrm-core/pull/23727))**

- **Fix custom import to work again (broke in master) ([23719](https://github.com/civicrm/civicrm-core/pull/23719))**

- **Added back 'Renewal Message' field on Membership renewal form ([23726](https://github.com/civicrm/civicrm-core/pull/23726))**

- **Enable ability to require tags in profiles ([23645](https://github.com/civicrm/civicrm-core/pull/23645))**

- **Remove a couple of non-test tests  - syntax conformance ([23715](https://github.com/civicrm/civicrm-core/pull/23715))**

- **Fix Contribution import with pledge handling, add test ([23717](https://github.com/civicrm/civicrm-core/pull/23717))**

- **(dev/core#3496) Missing extension leads to bootstrap error for "hook_civicrm_entityTypes" ([23718](https://github.com/civicrm/civicrm-core/pull/23718))**

- **Trivial extraction - addFormButtons shared code ([23709](https://github.com/civicrm/civicrm-core/pull/23709))**

- **Contribution import - simplify error handling ([23714](https://github.com/civicrm/civicrm-core/pull/23714))**

- **Fix import activity & add tests ([23707](https://github.com/civicrm/civicrm-core/pull/23707))**

- **Queue - When UserJob has no more tasks, update status & fire hook ([23711](https://github.com/civicrm/civicrm-core/pull/23711))**

- **Fix Participant import, add tests ([23703](https://github.com/civicrm/civicrm-core/pull/23703))**

- **Fix editing and saving a template contribution via form ([21471](https://github.com/civicrm/civicrm-core/pull/21471))**

- **PHP8.1 - Fix deprecated passing null to glob ([23713](https://github.com/civicrm/civicrm-core/pull/23713))**

- **Expand try-catch to whole function ([23704](https://github.com/civicrm/civicrm-core/pull/23704))**

- **Minor simplification - use `$self->getContactType(),` ([23710](https://github.com/civicrm/civicrm-core/pull/23710))**

- **dev/backdrop#8 - Move session start into CMS-specific classes. ([23620](https://github.com/civicrm/civicrm-core/pull/23620))**

- **dev/core#2325 Fix handling of seconds on import ([23708](https://github.com/civicrm/civicrm-core/pull/23708))**

- **Import - make tracking fields import-specific ([23692](https://github.com/civicrm/civicrm-core/pull/23692))**

- **Remove unused properties ([23701](https://github.com/civicrm/civicrm-core/pull/23701))**

- **Make try-catch more catchy ([23700](https://github.com/civicrm/civicrm-core/pull/23700))**

- **SearchKit - Make loading placeholders configurable ([23702](https://github.com/civicrm/civicrm-core/pull/23702))**

- **[Import] [Membership] Cleanup, fix form breakage (unreleased regression) ([23689](https://github.com/civicrm/civicrm-core/pull/23689))**

- **Afform - Add undo/redo buttons to the Admin UI ([23648](https://github.com/civicrm/civicrm-core/pull/23648))**

- **Use UI Queue runner for import ([23669](https://github.com/civicrm/civicrm-core/pull/23669))**

- **[NFC] Fix Since version in Price Set Entity APIv4 ([23698](https://github.com/civicrm/civicrm-core/pull/23698))**

- **Afform - Add 'administer afform' permission ([23687](https://github.com/civicrm/civicrm-core/pull/23687))**

- **Add not-yet-used function to allow the import to run in static (queue) context ([23691](https://github.com/civicrm/civicrm-core/pull/23691))**

- **Contribution import - tests & fixes on dates, amount  ([23688](https://github.com/civicrm/civicrm-core/pull/23688))**

- **Typo fix for Entity Id ([23693](https://github.com/civicrm/civicrm-core/pull/23693))**

- **Add price set entity api4 support ([23694](https://github.com/civicrm/civicrm-core/pull/23694))**

- **Mailing List Subscription: remove the cancel button ([23696](https://github.com/civicrm/civicrm-core/pull/23696))**

- **APIv4 - Allow creator to read `UserJob` and `Queue` records ([23690](https://github.com/civicrm/civicrm-core/pull/23690))**

- **SearchKit - Add "administer search_kit" permission ([23670](https://github.com/civicrm/civicrm-core/pull/23670))**

- **RelationshipCache - Set 'get' permissions ([23684](https://github.com/civicrm/civicrm-core/pull/23684))**

- **[Import] [Contribution] Cleanup templates & form variables, following contact pattern ([23683](https://github.com/civicrm/civicrm-core/pull/23683))**

- **[NFC] Mixin - update version tags and add comment for new version of mgd-php ([23685](https://github.com/civicrm/civicrm-core/pull/23685))**

- **dev/core#3481 - Don't translate css classes ([23686](https://github.com/civicrm/civicrm-core/pull/23686))**

- **Contact import - extract common code, make tags & groups queue-friendly ([23680](https://github.com/civicrm/civicrm-core/pull/23680))**

- **[REF] Remove handling for non-existent 'savedMapping' field ([23283](https://github.com/civicrm/civicrm-core/pull/23283))**

- **[NFC] Failing test for api chain using sequential ([23675](https://github.com/civicrm/civicrm-core/pull/23675))**

- **Reformat whitespace ([23676](https://github.com/civicrm/civicrm-core/pull/23676))**

- **(dev/core#1304) Queues - Allow background worker to drive tasks via APIv4 ([22762](https://github.com/civicrm/civicrm-core/pull/22762))**

- **Deprecate stuff getting super deep into the BAO unformatted ([23520](https://github.com/civicrm/civicrm-core/pull/23520))**

- **Contact Import cleanup - includes fixes to contact matchine ([23666](https://github.com/civicrm/civicrm-core/pull/23666))**

- **APIv3 - Fix regression in handling chained calls with `sequential` ([23672](https://github.com/civicrm/civicrm-core/pull/23672))**

- **Fix issue #116 api3 chain check_permissions ([23671](https://github.com/civicrm/civicrm-core/pull/23671))**

- **[REF] Improve Get Coordinates by supporting other geocoding providersâ€¦ ([23646](https://github.com/civicrm/civicrm-core/pull/23646))**

- **CiviGrant - Add prefix to permission label ([23668](https://github.com/civicrm/civicrm-core/pull/23668))**

- **(dev/core#1304) Queues - Define 'status' and 'error' columns ([23667](https://github.com/civicrm/civicrm-core/pull/23667))**

- **Print report or export report if user have access report permission ([23616](https://github.com/civicrm/civicrm-core/pull/23616))**

- **[UNRELEASED REGRESSION] APIv4 - Fix GetFields to return custom fields with no sub-type ([23657](https://github.com/civicrm/civicrm-core/pull/23657))**

- **Remove no-longer-used function 29 points ([23653](https://github.com/civicrm/civicrm-core/pull/23653))**

- **[Import] Cleanup Contribution flow - esp with regards to soft credits ([23588](https://github.com/civicrm/civicrm-core/pull/23588))**

- **[Import] [Ref] [Contribution] Additional functions, typo fix ([23637](https://github.com/civicrm/civicrm-core/pull/23637))**

- **Simplify return from createContact ([23635](https://github.com/civicrm/civicrm-core/pull/23635))**

- **Merge 5.50 to Master ([23647](https://github.com/civicrm/civicrm-core/pull/23647))**

- **Fix missing contactID when registering for paid event from waitlist ([23358](https://github.com/civicrm/civicrm-core/pull/23358))**

- ** Fix State handling to be case insensitive again (unreleased regression) ([23642](https://github.com/civicrm/civicrm-core/pull/23642))**

- **Import - ensure userID is set on parser ([23636](https://github.com/civicrm/civicrm-core/pull/23636))**

- **Fixes for contact matching - unreleased regression ([23643](https://github.com/civicrm/civicrm-core/pull/23643))**

- **Fix createEmployerRelationship to work with the data it has when doing a lookup, test ([23603](https://github.com/civicrm/civicrm-core/pull/23603))**

- **Simplify greeting handling, add test ([23629](https://github.com/civicrm/civicrm-core/pull/23629))**

- **show honor roll only if it's enabled for the PCP page ([23567](https://github.com/civicrm/civicrm-core/pull/23567))**

- **Make CaseType usable in Afform & SearchKit ([23640](https://github.com/civicrm/civicrm-core/pull/23640))**

- **Deprecate crazy BAO handling of preferred_communication_method ([23623](https://github.com/civicrm/civicrm-core/pull/23623))**

- **(dev/core#3141) Membership should be listed chronologically by join dâ€¦ ([23056](https://github.com/civicrm/civicrm-core/pull/23056))**

- **Minor cleanup on import return codes ([23626](https://github.com/civicrm/civicrm-core/pull/23626))**

- **SearchKit - add address proximity (map radius) search ([23597](https://github.com/civicrm/civicrm-core/pull/23597))**

- **Add Authx settings to navigation ([23631](https://github.com/civicrm/civicrm-core/pull/23631))**

- **Remove legacy calls to `civicrm_error`, unpack return ([23634](https://github.com/civicrm/civicrm-core/pull/23634))**

- **Update contributor-key.yml ([23633](https://github.com/civicrm/civicrm-core/pull/23633))**

- **[Import] [Ref] Trivial - fold function contents back into parent ([23610](https://github.com/civicrm/civicrm-core/pull/23610))**

- **(NFC) Scheduled Reminders - Reinstate and analyze test-case for "Also Include" ([23628](https://github.com/civicrm/civicrm-core/pull/23628))**

- **Test cleanup - use names keys in mapper array where possible for clarity ([23627](https://github.com/civicrm/civicrm-core/pull/23627))**

- **Remove obsolete code - this parameter is not possible ([23625](https://github.com/civicrm/civicrm-core/pull/23625))**

- **Fix swapOptions writing over selected options on mapField page load. ([23619](https://github.com/civicrm/civicrm-core/pull/23619))**

- **Release lock when deleting cache key ([23624](https://github.com/civicrm/civicrm-core/pull/23624))**

- **[Import] Unpack the weird wild error return ([23474](https://github.com/civicrm/civicrm-core/pull/23474))**

- **core 3459 getlist leading zero fix ([23609](https://github.com/civicrm/civicrm-core/pull/23609))**

- **Remove unused variables ([23613](https://github.com/civicrm/civicrm-core/pull/23613))**

- **Remove some unused variables ([23614](https://github.com/civicrm/civicrm-core/pull/23614))**

- **Whitespace cleanup - remove `if(1)` ([23621](https://github.com/civicrm/civicrm-core/pull/23621))**

- **dev/core#3038 Fix handling for payment_instrument_id, cleanup financial_type_id ([23586](https://github.com/civicrm/civicrm-core/pull/23586))**

- **[Import] Test + fix for failure to reject invalid ex identifier ([23560](https://github.com/civicrm/civicrm-core/pull/23560))**

- **5.50 to master ([23612](https://github.com/civicrm/civicrm-core/pull/23612))**

- **[Import] [Activity] Fix fatal error regression ([23606](https://github.com/civicrm/civicrm-core/pull/23606))**

- **Import locations - code cleanup, add tests, fix bugs ([23563](https://github.com/civicrm/civicrm-core/pull/23563))**

- **Make this error message more informative. ([23599](https://github.com/civicrm/civicrm-core/pull/23599))**

- **dev/core#3467 - Drupal 8 - Skip requirement for password when changing your own civi contact's email ([23546](https://github.com/civicrm/civicrm-core/pull/23546))**

- **Authx - Mark extension as beta ([23601](https://github.com/civicrm/civicrm-core/pull/23601))**

- **[Import] [ref] Move function to parent for use by siblings ([23592](https://github.com/civicrm/civicrm-core/pull/23592))**

- **Remove deprecated preferred_mail_format from more places... ([23565](https://github.com/civicrm/civicrm-core/pull/23565))**

- **Remove some never used fields - copy & paste begone ([23605](https://github.com/civicrm/civicrm-core/pull/23605))**

- **Additional test ([23562](https://github.com/civicrm/civicrm-core/pull/23562))**

- **APIv4 - Exclude disabled custom fields ([23583](https://github.com/civicrm/civicrm-core/pull/23583))**

- **[Import] Consolidate DataSource.tpl - template for first file on activity import ([23456](https://github.com/civicrm/civicrm-core/pull/23456))**

- **[Import] Add some not-yet-used `getParser` functions that are prone to conflict ([23590](https://github.com/civicrm/civicrm-core/pull/23590))**

- **5.50 to master ([23596](https://github.com/civicrm/civicrm-core/pull/23596))**

- **php8.1 - Check null first before sending to strlen ([23589](https://github.com/civicrm/civicrm-core/pull/23589))**

- **Another always-true-if ([23559](https://github.com/civicrm/civicrm-core/pull/23559))**

- **dev/core#3463 - CiviMail - prefer frontend_title from group for mailiâ€¦ ([23570](https://github.com/civicrm/civicrm-core/pull/23570))**

- **Test fix ([23561](https://github.com/civicrm/civicrm-core/pull/23561))**

- **Import - Relax "is_required" check for custom fields ([23576](https://github.com/civicrm/civicrm-core/pull/23576))**

- **dev/core#3177 Switch sms to use flexmailer token rendering ([23516](https://github.com/civicrm/civicrm-core/pull/23516))**

- **[REF] Fix handling of NULL values in count_characters smarty modifierâ€¦ ([23318](https://github.com/civicrm/civicrm-core/pull/23318))**

- **[NFC] Bring back deleted activity email tests ([23577](https://github.com/civicrm/civicrm-core/pull/23577))**

- **SearchKit - Fix pager & tab count after creating a new record in a popup ([23579](https://github.com/civicrm/civicrm-core/pull/23579))**

- **SearchKit - Allow SearchSegments to be packaged as .mgd.php ([23578](https://github.com/civicrm/civicrm-core/pull/23578))**

- **5.50 to master ([23587](https://github.com/civicrm/civicrm-core/pull/23587))**

- **ProximityQuery - Remove unused code ([23581](https://github.com/civicrm/civicrm-core/pull/23581))**

- **SearchKit - Fix default aggregate function for grand total rows ([23573](https://github.com/civicrm/civicrm-core/pull/23573))**

- **Remove unused class ([23580](https://github.com/civicrm/civicrm-core/pull/23580))**

- **[Import] Fix Contribution Import mapping fields to use labels ([23519](https://github.com/civicrm/civicrm-core/pull/23519))**

- **[Joomla 4.0] Fatal error on submitting Profile with CMS username/password ([23549](https://github.com/civicrm/civicrm-core/pull/23549))**

- **Move validate field function to the parent class [Straight move] ([23564](https://github.com/civicrm/civicrm-core/pull/23564))**

- **5.50 to master ([23575](https://github.com/civicrm/civicrm-core/pull/23575))**

- **Search kit grand totals ([23454](https://github.com/civicrm/civicrm-core/pull/23454))**

- **Add noisy deprecation to unused, deprecated, functions ([23571](https://github.com/civicrm/civicrm-core/pull/23571))**

- **5.50 to master ([23568](https://github.com/civicrm/civicrm-core/pull/23568))**

- **Remove do-nothing deprecated line ([23556](https://github.com/civicrm/civicrm-core/pull/23556))**

- **SearchKit - Use POST to send contact ids to action forms ([23548](https://github.com/civicrm/civicrm-core/pull/23548))**

- **5.50 ([23555](https://github.com/civicrm/civicrm-core/pull/23555))**

- **Remove unreachable code ([23551](https://github.com/civicrm/civicrm-core/pull/23551))**

- **Extend import option handling to prefix, suffix, language, communication_style ([23535](https://github.com/civicrm/civicrm-core/pull/23535))**

- **Clean up function signature ([23550](https://github.com/civicrm/civicrm-core/pull/23550))**

- **Remove extraneous deprecated check ([23532](https://github.com/civicrm/civicrm-core/pull/23532))**

- **Remove always true if conditions (whitespace in next commit) ([23533](https://github.com/civicrm/civicrm-core/pull/23533))**

- **[REF] Simplify contact.create ([23515](https://github.com/civicrm/civicrm-core/pull/23515))**

- **Remove never-true fields, and impossible property handling from previously shared function ([23545](https://github.com/civicrm/civicrm-core/pull/23545))**

- **Afform - dispatch event when loading afforms ([23488](https://github.com/civicrm/civicrm-core/pull/23488))**

- **[REF] Minor simplification on input ([23536](https://github.com/civicrm/civicrm-core/pull/23536))**

- **Greeting handling - if email_greeting_custom (etc) isset & email_greeting_id is not, set to 'Customized' ([23537](https://github.com/civicrm/civicrm-core/pull/23537))**

- **Add location import testing ([23540](https://github.com/civicrm/civicrm-core/pull/23540))**

- **Fix unreleased regression from strict typing ([23538](https://github.com/civicrm/civicrm-core/pull/23538))**

- **ðŸª³ðŸª³ðŸª³ Bug Fix: Merging an Organisation contact and de-selecting the merge Membership checkbox causes all related Membership to not be removed and the Primary Membership is linked to the deleted Organisation ([22682](https://github.com/civicrm/civicrm-core/pull/22682))**

- **dev/financial#6 Use template contribution for Contribution.repeattransaction ([22487](https://github.com/civicrm/civicrm-core/pull/22487))**

- **Capitalise event setting title ([23467](https://github.com/civicrm/civicrm-core/pull/23467))**

- **E-notice fix on import ([23541](https://github.com/civicrm/civicrm-core/pull/23541))**

- **Duplicate function - divide & conquer ([23542](https://github.com/civicrm/civicrm-core/pull/23542))**

- **Revert "SearchKit - Use POST to send contact ids to action forms" ([23544](https://github.com/civicrm/civicrm-core/pull/23544))**

- **[NFC] Remove weird file ([23539](https://github.com/civicrm/civicrm-core/pull/23539))**

- **SearchKit - Make inline edit only available when applicable ([23404](https://github.com/civicrm/civicrm-core/pull/23404))**

- **Add unit tests to cover date field imports ([23502](https://github.com/civicrm/civicrm-core/pull/23502))**

- **[Import] Remove empty if ([23531](https://github.com/civicrm/civicrm-core/pull/23531))**

- **Remove always-true if-check ([23530](https://github.com/civicrm/civicrm-core/pull/23530))**

- **SearchKit - Fix in-place editing custom relationship fields ([23496](https://github.com/civicrm/civicrm-core/pull/23496))**

- **[Import] Remove handling for unavailable field current_employer ([23509](https://github.com/civicrm/civicrm-core/pull/23509))**

- **[Import] Fix & test check on contact subtype change ([23508](https://github.com/civicrm/civicrm-core/pull/23508))**

- **[Import] Check subtype validity in validate rather than wait for 'imort' ([23526](https://github.com/civicrm/civicrm-core/pull/23526))**

- **Fixes dev/core#3475 - Allow 'yesno' as a valid value of `html_type` ([23525](https://github.com/civicrm/civicrm-core/pull/23525))**

- **SearchKit - Use POST to send contact ids to action forms ([23331](https://github.com/civicrm/civicrm-core/pull/23331))**

- **Ensure setting deceased date sets is_deceased in the BAO ([23521](https://github.com/civicrm/civicrm-core/pull/23521))**

- **Payment forms test fixes ([23524](https://github.com/civicrm/civicrm-core/pull/23524))**

- **Re-use code in test ([23523](https://github.com/civicrm/civicrm-core/pull/23523))**

- **[REF] Move list of fields that have been upgraded ([23518](https://github.com/civicrm/civicrm-core/pull/23518))**

- **[NFC] Improve comment blocks for mapper ([23517](https://github.com/civicrm/civicrm-core/pull/23517))**

- **[Ref] [Import] Cleanup function return ([23511](https://github.com/civicrm/civicrm-core/pull/23511))**

- **Ref Extract import validation ([23498](https://github.com/civicrm/civicrm-core/pull/23498))**

- **Cleanup sql query ([23512](https://github.com/civicrm/civicrm-core/pull/23512))**

- **[Import] Remove svn whimsy - DUPLICATE_REPLACE ([23504](https://github.com/civicrm/civicrm-core/pull/23504))**

- **Fix use of not-universally supported mysql field type ([23501](https://github.com/civicrm/civicrm-core/pull/23501))**

- **fix to get around link issues in ckeditor when opening scheduled remiâ€¦ ([23510](https://github.com/civicrm/civicrm-core/pull/23510))**

- **[REF] Remove unreachable code ([23507](https://github.com/civicrm/civicrm-core/pull/23507))**

- **[REF] [Import] Remove unused parameter ([23495](https://github.com/civicrm/civicrm-core/pull/23495))**

- **[Import] Remove silly param ([23493](https://github.com/civicrm/civicrm-core/pull/23493))**

- **5.50 to master ([23500](https://github.com/civicrm/civicrm-core/pull/23500))**

- **[Import] Remove `if (1) {` (whitespace intensive) ([23494](https://github.com/civicrm/civicrm-core/pull/23494))**

- **(REF) CRM_Upgrade_Form - Remove silly method `runQuery` ([23492](https://github.com/civicrm/civicrm-core/pull/23492))**

- **[Import] Simplify checking contact type is valid ([23476](https://github.com/civicrm/civicrm-core/pull/23476))**

- **APIv4 - Filter custom fields based on supplied values ([23489](https://github.com/civicrm/civicrm-core/pull/23489))**

- **Cleanup gender handling in contact import + add test ([23484](https://github.com/civicrm/civicrm-core/pull/23484))**

- **[REF] [Import] Remove now-unused code ([23461](https://github.com/civicrm/civicrm-core/pull/23461))**

- **[REF] [Import] Stop calling Parser in MapField mode (contact import) ([23470](https://github.com/civicrm/civicrm-core/pull/23470))**

- **Painstaking unravelling of function ([23483](https://github.com/civicrm/civicrm-core/pull/23483))**

- **[Import] Add tests for contact type & contact subtype handling ([23475](https://github.com/civicrm/civicrm-core/pull/23475))**

- **APIv4 - Export options along with custom field ([23452](https://github.com/civicrm/civicrm-core/pull/23452))**

- **Remove extra question mark from url ([23480](https://github.com/civicrm/civicrm-core/pull/23480))**

- **Fix Schema System Check translation and show missing Custom Field ID ([23469](https://github.com/civicrm/civicrm-core/pull/23469))**

- **SearchKit - Pick better default for aggregate functions ([23446](https://github.com/civicrm/civicrm-core/pull/23446))**

- **APIv4 - Respect max length for name with export action ([23472](https://github.com/civicrm/civicrm-core/pull/23472))**

- **[REF] [Import] Minor simplification ([23464](https://github.com/civicrm/civicrm-core/pull/23464))**

- **dev/core#2300 Can not use Custom Fields defined on a contact_sub_type in dedupeâ€¦ ([23459](https://github.com/civicrm/civicrm-core/pull/23459))**

- **[REF] [Import] Remove unused variable ([23463](https://github.com/civicrm/civicrm-core/pull/23463))**

- **CRM_Utils_Check - Catch Guzzle exception, same as core exception ([23466](https://github.com/civicrm/civicrm-core/pull/23466))**

- **Consolidate datasource form - event import ([23457](https://github.com/civicrm/civicrm-core/pull/23457))**

- **[REF] [Import] Activity - clean up copy & paste ([23289](https://github.com/civicrm/civicrm-core/pull/23289))**

- **[Import] [Ref] Remove unused variable ([23462](https://github.com/civicrm/civicrm-core/pull/23462))**

- **dev/core#492 Fix Dedupe rule creation should display labels of contact types, in câ€¦ ([23460](https://github.com/civicrm/civicrm-core/pull/23460))**

- **Import validate related contacts in the same way as the main contact ([23455](https://github.com/civicrm/civicrm-core/pull/23455))**

- **Allow for custom base page in AJAX requests ([23420](https://github.com/civicrm/civicrm-core/pull/23420))**

- **[REF] [Import] Minor code cleanup ([23444](https://github.com/civicrm/civicrm-core/pull/23444))**

- **Remove sets for no-longer gotten vars ([23453](https://github.com/civicrm/civicrm-core/pull/23453))**

- ** (NFC) karma - Enable all Civi components (not just CiviCase)  ([23450](https://github.com/civicrm/civicrm-core/pull/23450))**

- **(NFC) CRM_Utils_Hook - Typo ([23448](https://github.com/civicrm/civicrm-core/pull/23448))**

- **[REF] [Import] Parser cleanup  ([23442](https://github.com/civicrm/civicrm-core/pull/23442))**

- **(REF) CRM_Dedupe_BAO_DedupeRule - Support third party fields and tables in rules ([23332](https://github.com/civicrm/civicrm-core/pull/23332))**

- **[TEST ONLY] APIv4 - ensure test records are cleaned up in non-transaction tests ([23441](https://github.com/civicrm/civicrm-core/pull/23441))**

- **5.50 ([23443](https://github.com/civicrm/civicrm-core/pull/23443))**

- **SearchKit - Default to simple pager when creating new table display ([23436](https://github.com/civicrm/civicrm-core/pull/23436))**

- **SearchKit - Allow functions in the GROUP BY clause ([23434](https://github.com/civicrm/civicrm-core/pull/23434))**

- **[REF] [Import] Simplify if - exit loop early ([23427](https://github.com/civicrm/civicrm-core/pull/23427))**

- **Dashboard - Efficiency tweak ([23439](https://github.com/civicrm/civicrm-core/pull/23439))**

- **dev/drupal#176 - Allow wider range of psr-log versions to be installed ([23409](https://github.com/civicrm/civicrm-core/pull/23409))**

- **SearchKit - Don't transform case for fieldsets on admin screen (more translation-friendly) ([23437](https://github.com/civicrm/civicrm-core/pull/23437))**

- **Dashboard - Sort available dashlets alphabetically, add search box ([23438](https://github.com/civicrm/civicrm-core/pull/23438))**

- **Translation: remove support for CiviCRM pre-4.5 l10n file locations ([23435](https://github.com/civicrm/civicrm-core/pull/23435))**

- **[REF] APIv4 - Simplify entity creation in test suite ([23432](https://github.com/civicrm/civicrm-core/pull/23432))**

- **Dashboard - Show full title when hovering an inactive dashlet ([23433](https://github.com/civicrm/civicrm-core/pull/23433))**

- **[REF] [Import] Remove unused field get action (death to copy & paste) ([23428](https://github.com/civicrm/civicrm-core/pull/23428))**

- **[Import] Stop passing unused parameter ([23421](https://github.com/civicrm/civicrm-core/pull/23421))**

- **[Ref] [Import][Member] Remove unused params ([23425](https://github.com/civicrm/civicrm-core/pull/23425))**

- **5.50 to master ([23426](https://github.com/civicrm/civicrm-core/pull/23426))**

- **[REF] [Import] Create user-job records for Memership imports ([23416](https://github.com/civicrm/civicrm-core/pull/23416))**

- **[Import] Use table rather than csvs for no-match & unparsed ([23418](https://github.com/civicrm/civicrm-core/pull/23418))**

- **[REF] Fix PHP8.1 issue with passing NULL to trim() ([23317](https://github.com/civicrm/civicrm-core/pull/23317))**

- **SearchKit - Default to search for individuals ([23385](https://github.com/civicrm/civicrm-core/pull/23385))**

- **(REF) Importer - Remove unused parameters. Simplify signature. ([23401](https://github.com/civicrm/civicrm-core/pull/23401))**

- **5.50 to master ([23414](https://github.com/civicrm/civicrm-core/pull/23414))**

- **5.50 ([23411](https://github.com/civicrm/civicrm-core/pull/23411))**

- **[TEST ONLY] APIv4 - Remove unused extras from ConformanceTest ([23410](https://github.com/civicrm/civicrm-core/pull/23410))**

- **[REF] Import - make condition clearer ([23382](https://github.com/civicrm/civicrm-core/pull/23382))**

- **[REF] [Import] Contribution import - clarify return codes ([23290](https://github.com/civicrm/civicrm-core/pull/23290))**

- **[REF] [Import] Summary tpl - remove always-true ifs ([23406](https://github.com/civicrm/civicrm-core/pull/23406))**

- **[REF][Import] Remove some, now unused, parameters ([23405](https://github.com/civicrm/civicrm-core/pull/23405))**

- **Afform - support relationships ([23296](https://github.com/civicrm/civicrm-core/pull/23296))**

- **[Ref][Import] Remove now-unused code ([23395](https://github.com/civicrm/civicrm-core/pull/23395))**

- **[REF] [TEST ONLY] APIv4 - Reorganize test classes, don't use transactions for custom field tests ([23402](https://github.com/civicrm/civicrm-core/pull/23402))**

- **[Import] Reduce unused copy & paste ([23400](https://github.com/civicrm/civicrm-core/pull/23400))**

- **5.50 ([23399](https://github.com/civicrm/civicrm-core/pull/23399))**

- **dev/core#3447 Fix for master-only-regression ([23393](https://github.com/civicrm/civicrm-core/pull/23393))**

- **[REF] [Import] Stop passing unused parameters ([23386](https://github.com/civicrm/civicrm-core/pull/23386))**

- **5.50 ([23391](https://github.com/civicrm/civicrm-core/pull/23391))**

- **[Import] [Ref] Iterate through the mapping of fields ([23384](https://github.com/civicrm/civicrm-core/pull/23384))**

- **5.50 ([23388](https://github.com/civicrm/civicrm-core/pull/23388))**

- **Use correct user variable in hook_user_insert ([74](https://github.com/civicrm/civicrm-drupal-8/pull/74))**

- **(dev/drupal#79) Update PHP version checks ([51](https://github.com/civicrm/civicrm-joomla/pull/51))**

- **dev/joomla#16 : [Joomla 4.0] CiviCRM logo not showing in Quick Icon plugin ([65](https://github.com/civicrm/civicrm-joomla/pull/65))**

- **dev/drupal#179 - kcfinder - Explicit start of Drupal session ([342](https://github.com/civicrm/civicrm-packages/pull/342))**

## <a name="misc"></a>Miscellany

## <a name="credits"></a>Credits

This release was developed by the following code authors:

AGH Strategies - Alice Frumin, Andie Hunt; Agileware - Justin Freeman; Benjamin W; Christian Wach; Circle Interactive - Pradeep Nayak; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Yashodha Chaku; Coop SymbioTIC - Mathieu Lutfy; Dave D; Davis Media Access - Darrick Servis; Deepak Srivastava; ES-Progress - Sandor Semsey; Freeform Solutions - Herb van den Dool; Fuzion - Luke Stewart; iXiam - CÃ©sar Ramos; JMA Consulting - Monish Deb, Seamus Lee; Klangsoft - David Reedy Jr; Lighthouse Consulting and Design - Brian Shaughnessy; Megaphone Technology Consulting - Brienne Kordis, Jon Goldberg; MJW Consulting - Matthew Wire; Nicol Wistreich; Progressive Technology Project - Jamie McClelland; Robert J. Lang; Squiffle Consulting - Aidan Saunders; Third Sector Design - Kurund Jalmi; Wikimedia Foundation - Eileen McNaughton

Most authors also reviewed code for this release; in addition, the following
reviewers contributed their comments:

Agileware - Justin Freeman; ALL IN APPLI; Artful Robot - Rich Lott; Australian Greens - Andrew Cormick-Dockery; Betty Dolfing; Blackfly Solutions - Alan Dixon; Christian Wach; Circle Interactive - Pradeep Nayak; civibot[bot]; CiviCoop - Jaap Jansma; civicrm-builder; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Yashodha Chaku; clarkac1; Coop SymbioTIC - Mathieu Lutfy, Samuel Vanhove; Dave D; Davis Media Access - Darrick Servis; DevApp - Adam Kwiatkowski; Francesc Bassas i Bullich; Freeform Solutions - Herb van den Dool; Fuzion - Luke Stewart, Peter Davis; Greenleaf Advancement - Guy Iaccarino; Humanists UK - Andrew West;; iXiam - CÃ©sar Ramos; jaomalley; Jens Schuppe; JMA Consulting - Monish Deb, Seamus Lee; Megaphone Technology Consulting - Jon Goldberg; MJW Consulting - Matthew Wire; Nicol Wistreich; Progressive Technology Project - Jamie McClelland; Semper IT - Karin Gerritsen; Squiffle Consulting - Aidan Saunders; Tadpole Collective - Kevin Cristiano; Third Sector Design - Kurund Jalmi; Wikimedia Foundation - Eileen McNaughton